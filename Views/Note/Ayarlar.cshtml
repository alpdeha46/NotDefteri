@using NotDefteri.Data
@using NotDefteri.Models
@{
    var kullaniciAdi = Context.Session.GetString("kullanici");
    var kullanici = Veritabani.Kullanicilar.FirstOrDefault(u => u.KullaniciAdi == kullaniciAdi);
    var ayar = kullanici?.Ayarlar ?? new Ayarlar();
}

<div class="container mt-5">
    <div class="card shadow-lg p-5">

        <h2 class="mb-4">âš™ Hesap AyarlarÄ±</h2>

        <!-- KullanÄ±cÄ± Bilgisi -->
        <div class="mb-4">
            <h5>ğŸ‘¤ KullanÄ±cÄ± Bilgisi</h5>
            <p><strong>KullanÄ±cÄ± AdÄ±:</strong> @kullaniciAdi</p>
        </div>

        <hr />

        <!-- Åifre DeÄŸiÅŸtir -->
        <div class="mb-4">
            <h5>ğŸ”’ Åifre DeÄŸiÅŸtir</h5>
            @if (TempData["Mesaj"] != null)
            {
                <div class="alert alert-success">@TempData["Mesaj"]</div>
            }
            @if (TempData["Hata"] != null)
            {
                <div class="alert alert-danger">@TempData["Hata"]</div>
            }

            <form asp-action="SifreDegistir" method="post">
                <div class="mb-2">
                    <input type="password" name="eskiSifre"
                           class="form-control" placeholder="Eski Åifre" required />
                </div>

                <div class="mb-2">
                    <input type="password" name="yeniSifre"
                           class="form-control" placeholder="Yeni Åifre" required />
                </div>

                <button class="btn btn-primary">
                    GÃ¼ncelle
                </button>
            </form>
        </div>

        <hr />

        
        <div class="mb-4">
            <h5>ğŸ“ Not AyarlarÄ±</h5>

            <form asp-action="AyarGuncelle" method="post">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="NotTarihiGoster"
                           value="true" @(ayar.NotTarihiGoster ? "checked" : "") />
                    <label class="form-check-label">
                        Not oluÅŸtururken tarihi gÃ¶ster
                    </label>
                </div>

                <div class="form-check mt-2">
                    <input class="form-check-input" type="checkbox" name="NotlariTersSirala"
                           value="true" @(ayar.NotlariTersSirala ? "checked" : "") />
                    <label class="form-check-label">
                        NotlarÄ± en yeniden eskiye sÄ±rala
                    </label>
                </div>

                <div class="form-check mt-2">
                    <input class="form-check-input" type="checkbox" name="DarkMode"
                           value="true" @(ayar.DarkMode ? "checked" : "") />
                    <label class="form-check-label">
                        Dark Mode
                    </label>
                </div>

                <button class="btn btn-success mt-3">AyarlarÄ± Kaydet</button>
            </form>
        </div>

        <hr />

       
        <div class="mb-4">
            <h5 class="text-danger">ğŸ—‘ Tehlikeli Ä°ÅŸlemler</h5>

            <form asp-action="TumNotlariSil" method="post"
                  onsubmit="return confirm('TÃ¼m notlar silinsin mi?');">
                <button class="btn btn-danger w-100">
                    TÃ¼m NotlarÄ± Sil
                </button>
            </form>
            <br>
            <form asp-action="TumGorselleriSil" method="post"
                  onsubmit="return confirm('TÃ¼m gÃ¶rseller silinsin mi?');">
                <button class="btn btn-danger w-100">
                    TÃ¼m gÃ¶rselleri Sil
                </button>
            </form>
        </div>

        <hr />

        <a asp-controller="Account" asp-action="Logout"
           class="btn btn-dark w-100">
            Ã‡Ä±kÄ±ÅŸ Yap
        </a>

    </div>
</div>